<!DOCTYPE html>
<html lang="{{ CURRENT_LANGUAGE }}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Google tag (gtag.js) - Keep this in your HTML head -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-NTHY6NRHR1"></script>
    <script src="{{ url_for('static', filename='js/analytics.js') }}"></script>

    <!-- Font Awesome -->
    <link href="{{ url_for('static', filename='css/all.css') }}" rel="stylesheet">
    <!-- <link href="{{ url_for('static', filename='css/brands.css') }}" rel="stylesheet">
    <link href="{{ url_for('static', filename='css/solid.css') }}" rel="stylesheet"> -->

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,100;0,300;0,400;0,700;0,900;1,100;1,300;1,400;1,700;1,900&display=swap" rel="stylesheet">

    <link rel="shortcut icon" href="{{ url_for('static', filename='favicon.ico') }}">

    <!-- Advanced SEO + Babel Title System -->
    <title>{{ page_title or get_seo_title(page_key or 'home') }}</title>

    <!-- Enhanced Meta Tags -->
    <meta name="description" content="{% block meta_description %}{{ page_description or get_seo_description(page_key or 'home') }}{% endblock %}">
    <meta name="keywords" content="{% block meta_keywords %}{{ _('seo_keywords') }}{% endblock %}">
    <meta name="author" content="Modus Vivendi Oradea FTC Team">
    <meta name="robots" content="index, follow">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="{{ request.url }}">
    
    <!-- Language and Geographic Targeting -->
    <meta name="geo.region" content="RO-BH">
    <meta name="geo.placename" content="Oradea">
    <meta name="geo.position" content="47.0722;21.9178">
    <meta name="ICBM" content="47.0722, 21.9178">
    <link rel="alternate" hreflang="ro" href="{{ request.url }}">
    <link rel="alternate" hreflang="en" href="{{ request.url }}">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="{{ request.url }}">
	<meta property="og:title" content="{% block og_title %}{{ page_title or get_seo_title(page_key or 'home') }}{% endblock %}">
    <meta property="og:description" content="{% block og_description %}{{ page_description or get_seo_description(page_key or 'home') }}{% endblock %}">
    <meta property="og:image" content="{{ url_for('static', filename='images/og-image.jpg', _external=True) }}">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:image:alt" content="Modus Vivendi Oradea - Echipa FTC">
    <meta property="og:site_name" content="Modus Vivendi Oradea">
    <meta property="og:locale" content="{% if CURRENT_LANGUAGE == 'ro' %}ro_RO{% else %}en_US{% endif %}">
    
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="{{ request.url }}">
    <meta name="twitter:title" content="{% block twitter_title %}{{ page_title or get_seo_title(page_key or 'home') }}{% endblock %}">
    <meta name="twitter:description" content="{% block twitter_description %}{{ page_description or get_seo_description(page_key or 'home') }}{% endblock %}">
    <meta name="twitter:image" content="{{ url_for('static', filename='images/twitter-card.jpg', _external=True) }}">
    <meta name="twitter:image:alt" content="Modus Vivendi Oradea Team">
	
	<!-- Favicons and App Icons -->
    <link rel="apple-touch-icon" sizes="180x180" href="{{ url_for('static', filename='images/apple-touch-icon.png') }}">
    <link rel="icon" type="image/png" sizes="32x32" href="{{ url_for('static', filename='images/favicon-32x32.png') }}">
    <link rel="icon" type="image/png" sizes="16x16" href="{{ url_for('static', filename='images/favicon-16x16.png') }}">
    <link rel="manifest" href="{{ url_for('static', filename='site.webmanifest') }}">
    <link rel="mask-icon" href="{{ url_for('static', filename='images/safari-pinned-tab.svg') }}" color="#8e44ad">
    <meta name="msapplication-TileColor" content="#8e44ad">
    <meta name="theme-color" content="#8e44ad">
	
	<!-- Structured Data for FTC Team -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "Organization",
        "name": "Modus Vivendi Oradea",
        "alternateName": "Modus Vivendi FTC Team",
        "description": "{{ get_seo_description('home') }}",
        "url": "{{ request.url_root }}",
        "logo": "{{ url_for('static', filename='images/MVO_Logo.png', _external=True) }}",
        "address": {
            "@type": "PostalAddress",
            "streetAddress": "Strada Episcop Roman Ciorogariu Nr. 18",
            "addressLocality": "Oradea",
            "postalCode": "410017",
            "addressCountry": "RO"
        },
        "contactPoint": {
            "@type": "ContactPoint",
            "email": "echipa@modusvivendioradea.com",
            "contactType": "General Information"
        },
        "foundingDate": "2017",
        "memberOf": {
            "@type": "Organization",
            "name": "FIRST Tech Challenge",
            "url": "https://www.firstinspires.org/robotics/ftc"
        }
    }
    </script>
    
    {% block head_extra %}{% endblock head_extra %}
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">
    
    <style>
    /* SEO Debug info styling */
    .seo-debug {
        background: #f8f9fa;
        border: 1px solid #dee2e6;
        border-radius: 5px;
        padding: 10px;
        margin: 10px 0;
        font-size: 12px;
        color: #666;
	}
	</style>
</head>
<body>
    <!-- Optional: SEO Debug Info (remove in production) -->
    {% if request.args.get('debug') == 'seo' %}
    <div class="seo-debug">
        <strong>SEO Debug:</strong>
        Strategy: {{ seo_manager.strategy }} |
        Page: {{ page_key or 'home' }} |
        Language: {{ CURRENT_LANGUAGE }} |
        Total Requests: {{ seo_manager.get_total_requests() }}
    </div>
    {% endif %}

    <div id="notification-bar" class="notification-bar">
        {% block notification_bar %}{{ _('Default Notification') }}{% endblock %}
    </div>
    <header>
        <div>{% block header %}{{ _('Default Logo') }}{% endblock header %}</div>
        <div class="header-actions">
            {% include 'language_switcher.html' %}
        </div>
    </header>
    <nav>
        {% block navigation %}
        <!-- Navigation links here -->
        {% endblock navigation %}
    </nav>
    <main>
        {% block content %}{{ _('Default Content') }}{% endblock content %}
    </main>
    <footer>
        {% block footer %}
        {% include 'footer.html' %}
        {% endblock footer %}
    </footer>

    <!-- Bootstrap JS, Popper.js, and jQuery -->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js" integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+" crossorigin="anonymous"></script>
    
    {% block scripts %}{% endblock scripts %}
</body>
</html>
